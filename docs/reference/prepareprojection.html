<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>prepareprojection high level function that sets up a projection — prepareprojection • aMSE</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="prepareprojection high level function that sets up a projection — prepareprojection"><meta property="og:description" content="prepareprojection is a high level function that restructures
    zoneC by including the projected selectivity (in case the LML is set to
    change during the projections), and also selectivity x weight-at-size
    (for computational speed). It then generates a new zoneD with room for
    all replicates as well as the aspirational catches from each HS. It does
    this by converting the arrays of year x pop, to year x pop x replicate.
    It then uses the conditioned data in zoneDep to predict the first
    aspirational catches for the projections and conducts the initial
    replicate, thus starting the application of the HS. Finally, it adds
    recruitment variation to each of the replicates and keeps the last year
    of each iteration of the addrecvar function as the start of each
    replicate projection, with zeros in the catch, cpue, and cesau arrays.
    If the repeatable projections are wanted either set _randseedP_ = 0,
    whereupon the pseudorandom numbers will proceed from those started using
    the _randomseed_ set in the control file. Alternatively set a new seed
    into _randseedP_ (perhaps use _getseed()_), or set it to NA, which means
    it will merely run _set.seed()_, which will use the system time as a
    starting seed (hence each scenario run will differ)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aMSE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Comparing_Scenarios.html">Comparison of MSE Scenarios</a>
    </li>
    <li>
      <a href="../articles/model_documentation.html">Abalone MSE Model Documentation</a>
    </li>
    <li>
      <a href="../articles/the_data_files.html">Abalone MSE Data files</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/haddonm/aMSE/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>prepareprojection high level function that sets up a projection</h1>
    <small class="dont-index">Source: <a href="https://github.com/haddonm/aMSE/blob/HEAD/R/projection.R" class="external-link"><code>R/projection.R</code></a></small>
    <div class="hidden name"><code>prepareprojection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>prepareprojection is a high level function that restructures
    zoneC by including the projected selectivity (in case the LML is set to
    change during the projections), and also selectivity x weight-at-size
    (for computational speed). It then generates a new zoneD with room for
    all replicates as well as the aspirational catches from each HS. It does
    this by converting the arrays of year x pop, to year x pop x replicate.
    It then uses the conditioned data in zoneDep to predict the first
    aspirational catches for the projections and conducts the initial
    replicate, thus starting the application of the HS. Finally, it adds
    recruitment variation to each of the replicates and keeps the last year
    of each iteration of the addrecvar function as the start of each
    replicate projection, with zeros in the catch, cpue, and cesau arrays.
    If the repeatable projections are wanted either set _randseedP_ = 0,
    whereupon the pseudorandom numbers will proceed from those started using
    the _randomseed_ set in the control file. Alternatively set a new seed
    into _randseedP_ (perhaps use _getseed()_), or set it to NA, which means
    it will merely run _set.seed()_, which will use the system time as a
    starting seed (hence each scenario run will differ).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepareprojection</span><span class="op">(</span></span>
<span>  projC <span class="op">=</span> <span class="va">projC</span>,</span>
<span>  condC <span class="op">=</span> <span class="va">condC</span>,</span>
<span>  zoneC <span class="op">=</span> <span class="va">zoneC</span>,</span>
<span>  glb <span class="op">=</span> <span class="va">glb</span>,</span>
<span>  zoneDD <span class="op">=</span> <span class="va">zoneDD</span>,</span>
<span>  ctrl <span class="op">=</span> <span class="va">ctrl</span>,</span>
<span>  varyrs <span class="op">=</span> <span class="va">varyrs</span>,</span>
<span>  calcpopC <span class="op">=</span> <span class="va">calcpopC</span>,</span>
<span>  lastsigR <span class="op">=</span> <span class="fl">0.3</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>projC</dt>
<dd><p>the projection object from readctrlfile</p></dd>


<dt>condC</dt>
<dd><p>historical conditioning data</p></dd>


<dt>zoneC</dt>
<dd><p>the constant part of the zone</p></dd>


<dt>glb</dt>
<dd><p>the global variables</p></dd>


<dt>zoneDD</dt>
<dd><p>the zone after initial depletion through conditioning on the
fishery</p></dd>


<dt>ctrl</dt>
<dd><p>the ctrl object for the scenario run</p></dd>


<dt>varyrs</dt>
<dd><p>how many years at the end to add recruitment variation</p></dd>


<dt>calcpopC</dt>
<dd><p>a function that takes the output from hcrfun and gernerates
the actual catch per population expected in the current year.</p></dd>


<dt>lastsigR</dt>
<dd><p>recruitment variation for when it is applied for varyrs</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list of the dynamic zone object as a list of arrays of projyrs x
    populations x replicates, plus the revised projC and revised zoneC</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"wait on data files"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "wait on data files"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Malcolm Haddon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

